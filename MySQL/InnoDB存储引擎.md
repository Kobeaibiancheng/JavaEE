# InnoDB逻辑存储结构

![image-20250328201012237](C:\Users\Tibet\AppData\Roaming\Typora\typora-user-images\image-20250328201012237.png)

**表空间**（ibd文件），一个mysql实例可以对应多个表空间，用于存储记录，索引数据等

**段**，分为数据段，索引段，回滚段，InnoDB是索引组织表，数据段就是B+树的叶子节点，索引段即为B+树的非叶子节点。段用来管理多个区（Extent）

**区**，表空间的单元结构，每个区的大小为1M。默认情况下，InnoDB存储引擎页大小为16k，即一个区中一共有64个连续的页。

**页**，是InnoDB存储引擎磁盘管理的最小单元，每个页的大小默认为16KB，为了保证页的连续性，InnoDB存储引擎每次从磁盘申请4-5个区。

**行**，InnoDB存储引擎数据是按行进行存放的。

# 架构

![image-20250328202117490](C:\Users\Tibet\AppData\Roaming\Typora\typora-user-images\image-20250328202117490.png)

Buffer Pool：缓冲池，位于内存中的一块区域，在执行增删改查时，先判断数据是否在缓冲池中，若在，则先操作缓冲池中的数据，若不在，则从磁盘中将数据加载到缓冲池中，然后再以一定的频率将数据刷新到磁盘中，从而减少磁盘IO，加快处理速度。

缓冲池以Page页为单位，底层采用链表管理Page，根据页状态，可以分为三类

1.free page：空闲页

2.clean page：被使用的页，但数据没有被修改

3.dirty page：被使用的页，且数据被修改过，页中数据和磁盘中的数据不一致

